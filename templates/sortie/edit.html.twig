{% extends 'base.html.twig' %}
{% form_theme form 'bootstrap_5_layout.html.twig' %}

{% block title %}Sortie{% endblock %}

{% block body %}
<h1>Modifier une sortie</h1>
{{ form_start(form) }}
<div class="row justify-content-around">
    <div class="col-5">
        <div class="mb-3">
            {{ form_row(form.nom) }}
        </div>
        <div class="mb-3">
            {{ form_row(form.dateHeureDebut) }}
        </div>
        <div class="mb-3">
            {{ form_row(form.dateLimiteInscription) }}
        </div>
        <div class="mb-3">
            <div class="mb-3">
                {{ form_label(form.nbInscriptionsMax) }}
                <div class="col-sm-4">
                    {{ form_widget(form.nbInscriptionsMax) }}
                </div>
            </div>
        </div>
        <div class="mb-3">
            <div class="mb-3">
                {{ form_label(form.duree) }}
                <div class="col-sm-4">
                    {{ form_widget(form.duree) }}
                </div>
            </div>
        </div>
        <div class="mb-3">
            {{ form_row(form.infoSortie) }}
        </div>
    </div>
    <div class="col-5">
        <div class="mb-3">
            {{ form_row(form.campus) }}
        </div>
        <div class="mb-3">
            <label class="form-label required" for="sortie_lieu">Lieu</label>
            <div class="mb-3 input-group">
                <select id="sortie_lieu" name="sortie[lieu]" class="form-select" required="required">
                    {% for lieu in lieus %}
                        <option value="{{ lieu.id }}" {{ sortie.lieu.id is same as(lieu.id) ? 'selected' : '' }}>{{ lieu.nom }}</option>
                    {% endfor %}
                </select>
                <span class="input-group-btn ms-2">
                    <a class="btn" onclick="ajouterUnNouveauLieu()"><strong>+</strong></a>
                </span>
            </div>
        </div>
        <div class="mb-3">
            {{ form_row(form.rue) }}
        </div>
        <div class="mb-3">
            <div class="mb-3">
                <label class="form-label required" for="sortie_codePostal">Code postal</label>
                <input type="text" id="sortie_codePostal" name="sortie[codePostal]" readonly="readonly"
                       class="form-control" value="{{ sortie.lieu.ville.codePostal }}">
            </div>
        </div>
        <div class="mb-3">
            {{ form_row(form.latitude) }}
        </div>
        <div class="mb-3">
            {{ form_row(form.longitude) }}
        </div>
    </div>
</div>
<div class="row">
    {{ form_widget(form.enregistrer) }}
    {{ form_widget(form.publier) }}
    <form method="post" action="{{ path('app_sortie_delete', {'id': sortie.id}) }}" onsubmit="return confirm('Confirmez-vous la suppression de la sortie ?');">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ sortie.id) }}">
        <button class="btn btn-primary">Supprimer la sortie</button>
    </form>
    <a href="{{ path('app_sortie_index') }}" class="btn btn-primary" role="button">Annuler</a>
</div>
{{ form_end(form) }}
{% endblock %}

{% block javascripts %}
<script src="{{ asset('js/modifier_sortie.js') }}" type="text/javascript"></script>
{% endblock %}
